using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.IO;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace MEDAS
{
    public partial class winShow : Form
    {
        MainClass mc = new MainClass();
        public winShow()
        {
            InitializeComponent();
        }


        private void button1_Click(object sender, EventArgs e)
        {
            //short[] tta = new short[] { 0x4F60, 0x7D59 };
            //string a = Encoding.GetEncoding("GB2312").GetString(tta);

            //string frames = "424D32303020202020205552494E414C59534953202020200A0D5365712E4E6F2E20202030322020202020202020202020200A0D5061742E49443A20202020202020202020202020202020200A0D30312E30392E3230313620202020202020202031313A33340A0D2020202020202020202020202020202020202020202020200A0D202020205347202020312E303035202020202020200A0D2020202070482020202020202037202020202020200A0D202020204C455520202020202B2B20202020203130302020204C65752F756C202020202020200A0D2020202045525920202020202B2B20202020202032352020204572792F756C202020202020200A0D202020204E495420202020202B2B202020202020200A0D202020204B45542020202020202B2020202020302E352020206D6D6F6C2F6C202020202020200A0D2020202042494C2020202020202D2020202020202020202020756D6F6C2F6C202020202020200A0D20202020554247202020202B2B2B2020202020313430202020756D6F6C2F6C202020202020200A0D2020202050524F2020202020202B2020202020302E33202020202020672F6C202020202020200A0D20202020474C5520202020202B2B20202020202020362020206D6D6F6C2F6C202020202020200A0D2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E2E0A0D";
            //byte[] framesByte = ToolAPI.ConvertData.HexToByte(frames);
            //Bm200.ProtocolAnalysis(framesByte,"");


            //string frames = "7777772E626A626C6D2E636F6D5F524243000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000424C4D0A0D7777772E626A626C6D2E636F6D5F504C54000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000424C4D0A0D49443A20202020202020310A0D446174613A323031372D30372D30342031303A32390A0D52424320202020302E3030207831305E31322F4C0A0D4843542020202020302E3020250A0D4D43562020202020302E3020664C0A0D524457534420202020203020664C0A0D5244574356202020302E3020250A0D504C542020202020202030207831305E392F4C0A0D504354202020302E30303020250A0D4D50562020202020302E3020664C0A0D5044572020202020302E3020664C0A0D502D4C4352202020302E3020250A0D4E6F74653A20202020202020200A0D53657269616C3A20202020203235340A0D54656D703A20202032380A0D466C6F773A202020203020202020300A0D526F64653A20202020200A0D453A0A0D7777772E626A626C6D2E636F6D5F574243000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000424C4D0A0D49443A20202020202020310A0D446174613A323031372D30372D30342031303A32390A0D5742432020202020302E30207831305E392F4C0A0D4C594D23202020302E3030207831305E392F4C0A0D4D4F4E23202020302E3030207831305E392F4C0A0D47524123202020302E3030207831305E392F4C0A0D4C594D2520202020302E3020250A0D4D4F4E2520202020302E3020250A0D4752412520202020302E3020250A0D4847422020202035332E3620672F4C0A0D4D43482020202020302E302070670A0D4D4348432020202020203020672F4C0A0D4E6F74653A20202020202020200A0D53657269616C3A20202020203235340A0D54656D703A20202032380A0D466C6F773A202020203020202020300A0D526F64653A20202020200A0D453A0A0D";
            //byte[] framesByte = ToolAPI.ConvertData.HexToByte(frames);
            //Bm21B.ProtocolAnalysis(framesByte,"");

            #region 测试
           // 软件安装验证
            //DataUpload.VerifyAsyn();
           // 设备监控
            //DataUpload.MonitorAsyn("10001", "RK-73106856");
            //上报数据
            //string frames = "050353524354616D706C65496E666F0C53616D706C6549441632084D6F64651630085465737454696D6516323031372D30372D31322031343A34373A3435084E616D6516BBC6B3A90847656E64657216320847726F757016310841676556616C163137084167655479706516310844657074160843686172744E6F16084265644E6F160853656E64657216085465737465721608436865636B65721608045742430C56616C16302E30084C6F7716342E3008486967681631302E3008556E69741631305E392F4C08044C796D7068230C56616C162A2A2A2E2A084C6F7716302E38084869676816342E3008556E69741631305E392F4C08044D6964230C56616C162A2A2A2E2A084C6F7716302E31084869676816312E3508556E69741631305E392F4C08044772616E230C56616C162A2A2A2E2A084C6F7716322E30084869676816372E3008556E69741631305E392F4C08044C796D7068250C56616C162A2A2E2A084C6F771632302E3008486967681634302E3008556E6974162508044D6964250C56616C162A2A2E2A084C6F7716332E3008486967681631352E3008556E6974162508044772616E250C56616C162A2A2E2A084C6F771635302E3008486967681637302E3008556E6974162508044847420C56616C1630084C6F771631323008486967681631363008556E697416672F4C08045242430C56616C16302E3030084C6F7716342E3030084869676816352E353008556E69741631305E31322F4C08044843540C56616C16302E30084C6F771634302E3008486967681635342E3008556E6974162508044D43560C56616C162A2A2A2E2A084C6F771638302E300848696768163130302E3008556E697416664C08044D43480C56616C162A2A2A2E2A084C6F771632372E3008486967681633342E3008556E697416706708044D4348430C56616C162A2A2A2A084C6F771633323008486967681633363008556E697416672F4C08045244572D43560C56616C162A2A2E2A084C6F771631312E3008486967681631362E3008556E6974162508045244572D53440C56616C162A2A2A2E2A084C6F771633352E3008486967681635362E3008556E697416664C0804504C540C56616C1630084C6F771631303008486967681633303008556E69741631305E392F4C08044D50560C56616C162A2A2E2A084C6F7716362E3508486967681631322E3008556E697416664C08045044570C56616C162A2A2E2A084C6F7716392E3008486967681631372E3008556E6974162008045043540C56616C162E2A2A2A084C6F7716302E313038084869676816302E32383208556E697416250804502D4C43520C56616C162A2A2E2A084C6F771631312E3008486967681634352E3008556E697416250804416C61726D466C61670C526D1630085231163008523216300852331630085234163008506D163008506C1630085073163008045365704C696E650C5365705742434C794C656674163130085365705742434C794D69641630085365705742434772616E4D69641630085365705742434772616E526967687416323535085365705242434C6566741631300853657052424352696768741632353008536570504C544C656674163508536570504C545269676874163131380804574243486973746F0C446174614C656E16323536084D657461446174614C656E16310857486973746F44617461160000000000000000000000000000000000000080808080808080FF8080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000808080FFFFFFFFFF8080800000000000000000000000000000000000000000000000000000000000000000808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080808080808080800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000804524243486973746F0C446174614C656E16323536084D657461446174614C656E16310852486973746F44617461160000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFFFFFFFFFF0000000000FFFFFFFFFFFFFFFF000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFFFFFFFFFF0000000000000000000804504C54486973746F0C446174614C656E16323536084D657461446174614C656E16310850486973746F4461746116003B143B4E9DB1D8EBEBFFEBD8B1B1899D899DC4C49D89896276623B3B626262624E3B27270000273B3B3B4E4E4E4E27141414000014141414141414272727273B3B3B3B2714272727273B3B3B3B27271414000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000E7B0E7A0000000004D7060200018EFA0000068700046F00000328000001DA00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008040A";
            //byte[] framesByte = ToolAPI.ConvertData.HexToByte(frames);
            //BC_1800.ProtocolAnalysis(framesByte, "RK-73106856");
            //版本号
            //DataUpload.VersionAsyn();

            #endregion
            mc.Start();
        }

        private void button2_Click(object sender, EventArgs e)
        {
            mc.Stop();
        }

        private void button3_Click(object sender, EventArgs e)
        {
            byte[] ping = new byte[] { 0xCD,0xF5,0xCE,0xE5 };
            string abc = Encoding.ASCII.GetString(ping);
            string abc1 = Encoding.BigEndianUnicode.GetString(ping);
            string abc2 = Encoding.Default.GetString(ping);
            string abc3 = Encoding.Unicode.GetString(ping);
            string abc4 = Encoding.UTF32.GetString(ping);
            string abc5 = Encoding.UTF7.GetString(ping);
            string abc6 = Encoding.UTF8.GetString(ping);

            string a = "CDF5CEE5";
            string result = HexStringToAsciiString(a);
            string result1 = HexStringToUTFString(a);
        }
        private static string HexStringToAsciiString(string DesString)
        {
            try
            {
                byte[] MDByteAry = ToolAPI.ConvertData.HexToByte(DesString);
                return Encoding.ASCII.GetString(MDByteAry);
            }
            catch (Exception) { return ""; }
        }
        private static string HexStringToUTFString(string DesString)
        {
            try
            {
                byte[] MDByteAry = ToolAPI.ConvertData.HexToByte(DesString);
                return Encoding.UTF8.GetString(MDByteAry);
            }
            catch (Exception) { return ""; }
        }
    }
}
